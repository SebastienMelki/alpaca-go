syntax = "proto3";

package alpaca.trading.v1;

import "sebuf/http/annotations.proto";
import "alpaca/trading/v1/order.proto";

// CloseAllPositionsRequest is the request to close all open positions.
message CloseAllPositionsRequest {
  // Whether to cancel all open orders before closing positions.
  bool cancel_orders = 1 [
    (sebuf.http.query) = { name: "cancel_orders" },
    (sebuf.http.field_examples) = { values: ["true"] }
  ];
}

// ClosedPosition represents the result of closing a single position.
message ClosedPosition {
  // The symbol of the closed position.
  string symbol = 1 [(sebuf.http.field_examples) = { values: ["AAPL"] }];

  // HTTP status code for this close operation.
  int32 status = 2 [(sebuf.http.field_examples) = { values: ["200"] }];

  // The closing order if successful.
  Order order = 3;
}

// CloseAllPositionsResponse is the response after closing all positions.
message CloseAllPositionsResponse {
  // List of closed positions.
  repeated ClosedPosition positions = 1;
}
